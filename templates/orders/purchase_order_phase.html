<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order {{ order.id }} - Purchase Order/Contract</title>

    {% load static %}
    {% include 'bootstrap.html' %}
    {% include 'core/navbar.html' %}

    <script src="{% static 'js/base_orders.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/orders.css' %}">

</head>
<body>
    <div class="container" style="margin-top: 100px;">
        <div class="row">
            <div class="col-md-10">
                <h1 class="display-4">Purchase Order/Contract</h1>
            </div>
            <div class="col-md-2 mt-3">
                <a href="{% url 'orders:order-details' order.id %}"><button class="btn btn-secondary">Back to Order Details</button></a>
            </div>
        </div>

        {% if messages  %}
            <div class="alert alert-success">
                {% for message in messages %}
                    <strong>{{ message }}</strong>
                {% endfor %}
            </div>
        {% endif %}

        <div class="row">
            <div class="col-md-12">
                {% if order.has_contract %}
                    <div class="alert alert-success">
                        <strong>This customer has already paid the down payment</strong>
                    </div>
                {% else %}
                    <div class="alert alert-warning">
                        <strong>This customer has not yet paid the down payment</strong>
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h4>Tasks Involved for this Phase</h4>
                <table class="table table-striped">
                    <thead class="thead-dark">
                    <tr>
                        <th>Task</th>
                        <th class="text-center">Action</th>
                        <th class="text-center">Status</th>
                    </tr>
                    </thead>
                    <!-- TODO make it dynamic -->
                    <tbody>
                    <tr>
                        {% if not has_contract %}
                            <td>Generate Contract</td>
                            <td><a href="{% url 'orders:contract-form' order.id %}"><button class="btn btn-primary btn-block">Go to this Task</button></a></td>
                            <td class="text-center"><img src="{% static 'images/red-cross.svg' %}" height="20px"></td>
                        {% else %}
                            <td>View Contract</td>
                            <td><a href="{% url 'orders:view-contract' order.id %}" target="_blank"><button class="btn btn-primary btn-block">View Contract</button></a></td>
                            <td class="text-center"><img src="{% static 'images/green-check.png' %}" height="20px"></td>
                        {% endif %}

                    </tr>
                    <tr>

                        <td>Generate Billing Statement for Downpayment</td>
                        {% if order.billingstatement_set.count == 0 %}
                            <td><a href="{% url 'orders:bill-1' order.id %}"><button class="btn btn-primary btn-block">Accomplish this Task</button></a></td>
                            <td class="text-center"><img src="{% static 'images/red-cross.svg' %}" height="20px"></td>
                        {% else %}
                            <td><a href="{% url 'orders:view_bill-1' order.id %}" target="_blank"><button class="btn btn-primary btn-block">View Billing Statement</button></a></td>
                            <td class="text-center"><img src="{% static 'images/green-check.png' %}" height="20px"></td>
                        {% endif %}

                    </tr>
                    <tr>
                        <td>Generate Official Receipt for Downpayment</td>
                        {% if order.officialreceipt_set.count == 0 %}
                            <td><a href="{% url 'orders:official-receipt-1' order.id %}"><button class="btn btn-primary btn-block">Accomplish this Task</button></a></td>
                            <td class="text-center"><img src="{% static 'images/red-cross.svg' %}" height="20px"></td>
                        {% else %}
                            <td><a href="{% url 'orders:view_or-1' order.id %}"><button class="btn btn-primary btn-block">View Official Receipt</button></a></td>
                            <td class="text-center"><img src="{% static 'images/green-check.png' %}" height="20px"></td>
                        {% endif %}
                    </tr>
                    <tr>
                        <td>Schedule Engineers</td>
                        <td><a><button class="btn btn-primary btn-block">Go to this Task</button></a></td>
                        <td class="text-center"><img src="{% static 'images/red-cross.svg' %}" height="20px"></td>
                    </tr>
                    </tbody>
                    <tr>
                        <td colspan="3"><a><button class="btn btn-success btn-block">Done </button></a></td>
                    </tr>
                </table>
            </div>
        </div>

    </div>
</body>
</html>